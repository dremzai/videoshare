/**
 * @tpl é¦–é¡µæ¨¡æ¿
 */

<template>
	<view class="uni__container flexbox flex_col">
		<header-bar v-if="currentTabIndex == 0" :isBack="false" title=" " titleTintColor="#353535" :bgColor="{'background': '#fff'}">
			<view slot="headerL" class="uni_btnIco flexbox" @tap="handleTopNav(0)"><text class="fs_14" :class="[currentNavIndex == 0 ? 'fs_20 bold' : '']">æœ€æ–°æ¨è</text></view>
			<view slot="headerL" class="uni_btnIco flexbox" @tap="handleTopNav(1)"><text class="fs_14" :class="[currentNavIndex == 1 ? 'fs_20 bold' : '']">æˆ‘å‚äºçš„</text></view>
			<view slot="headerL" class="uni_btnIco flexbox" @tap="handleTopNav(2)"><text class="fs_14" :class="[currentNavIndex == 2 ? 'fs_20 bold' : '']">æˆ‘åˆ›å»ºçš„</text><text class="uni_badge" style="position: absolute;top:0;right:-5upx;">1</text></view>
			<!-- <text slot="iconfont" class="uni_btnIco iconfont icon-sousuo"></text> -->
			<text slot="iconfont" class="uni_btnIco iconfont icon-fabu" @tap="handlePublish"></text>
		</header-bar>
		<header-bar v-else-if="currentTabIndex == 1" :isBack="false" title=" " titleTintColor="#353535" :bgColor="{'background': '#fff'}">
			<view slot="headerL" class="uni_btnIco flexbox"><text class="fs_20 bold">æ¨è</text></view>
			<view slot="headerL" class="uni_btnIco flexbox"><text class="fs_14">æˆ‘çš„</text></view>
			<text slot="iconfont" class="uni_btnIco iconfont icon-tianjia"></text>
		</header-bar>
		<header-bar v-else-if="currentTabIndex == 2" :isBack="false" title=" " titleTintColor="#353535" :bgColor="{'background': '#fff'}">
			<view slot="headerL" class="uni_btnIco flexbox"><text class="fs_20 bold">æ¶ˆæ¯ (15)</text></view>
			<!-- <text slot="iconfont" class="uni_btnIco iconfont icon-clear"></text>
			<text slot="iconfont" class="uni_btnIco iconfont icon-haoyou" @tap="GoContact"></text> -->
		</header-bar>
		<header-bar v-else-if="currentTabIndex == 3" :isBack="false" title=" " titleTintColor="#353535" :bgColor="{'background': '#fff'}"><view slot="headerL" class="uni_btnIco flexbox"><text class="fs_20 bold">æˆ‘</text></view>
		<!-- <text slot="iconfont" class="uni_btnIco iconfont icon-tab03" @tap="handleDropMenu"></text> -->
		</header-bar>
		<header-bar v-else :isBack="false" title=" " titleTintColor="#353535" :bgColor="{'background': '#fff'}"><text slot="iconfont" class="uni_btnIco iconfont icon-shezhi"></text>
		</header-bar>
		<view class="uni__scrollview flex1">
			<block v-if="currentTabIndex == 0">
				<view v-if="currentNavIndex == 0" class="uni__nearDynamics">
					<view class="fz_container">
						<view class="fz_item flexbox uni__material" @longpress="handleDynamicMenu"><image class="fzitem_avator" src="/static/uimg/u__chat_img9.jpg" mode="aspectFill" />
							<view class="fzitem_content flex1">
								<text class="fz_user">å­¤ç‹¬ä¼ŠäººğŸ’‹</text><view class="mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>24</view><view class="uni-vip v1 ml_5">VIP2</view>
								</view>
								<view class="fz_cnts">è¿™ä¸€å¤©å¤©æ—¶é—´è¿‡çš„å¥½å¿«å•Š...</view><view class="fz_photos"><image class="fz_img_auto" src="/static/placeholder/placeholder-img5.jpg" mode="aspectFill" />
								</view>
								<view class="fz_foot flexbox flex_alignc">
									<view class="flex1"><text class="fz_time">19åˆ†é’Ÿå‰</text><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>1.12km</view><text class="c_bbb fs_12 ml_10">158é˜…è¯»</text>
									</view>
									<text class="iconfont icon-xihuan"></text><text class="iconfont icon-pinglun ml_15"></text>
								</view>
							</view>
						</view>
						<view class="fz_item flexbox uni__material" @longpress="handleDynamicMenu"><image class="fzitem_avator" src="/static/uimg/u__chat_img5.jpg" mode="aspectFill" />
							<view class="fzitem_content flex1">
						<text class="fz_user">å¾€åä½™ç”Ÿéƒ½æ˜¯ä½ </text>
							<view class="mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>21</view>
							</view><view class="fz_cnts">ğŸ˜å¬è¯´ä½ å¾ˆå­¤ç‹¬</view>
								<view class="fz_photos"><image class="fz_img" src="/static/uimg/u__chat_img12.jpg" mode="aspectFill" /><image class="fz_img" src="/static/uimg/u__chat_img13.jpg" mode="aspectFill" />
								</view>
							<view class="fz_foot flexbox flex_alignc"><view class="flex1">
							<text class="fz_time">36åˆ†é’Ÿå‰</text><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.64km</view><text class="c_bbb fs_12 ml_10">237é˜…è¯»</text>
									</view>
							<text class="iconfont icon-xihuan"></text><text class="iconfont icon-pinglun ml_15"></text>
								</view>
							</view>
						</view>
						<view class="fz_item flexbox uni__material" @longpress="handleDynamicMenu"><image class="fzitem_avator" src="/static/uimg/u__chat_img14.jpg" mode="aspectFill" />
							<view class="fzitem_content flex1"><text class="fz_user">å°æ ·</text>
						<view class="mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>25</view><view class="uni-vip v3 ml_5">VIP3</view>
								</view>
								<view class="fz_cnts">è…°é…¸èƒŒç—›çš„ä¸€æ—¥ğŸ˜¶</view><view class="fz_foot flexbox flex_alignc">
							<view class="flex1"><text class="fz_time">55åˆ†é’Ÿå‰</text><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>1.67km</view><text class="c_bbb fs_12 ml_10">15é˜…è¯»</text>
							</view><text class="iconfont icon-xihuan"></text><text class="iconfont icon-pinglun ml_15"></text>
						</view>
					</view>
						</view>
					</view>
				</view>
				<view v-if="currentNavIndex == 1" class="uni__nearPeoples">
					<view class="uni__listview"><view class="item uni__list uni__material" @tap="GoUhome">
							<view class="avator"><image src="/static/uimg/u__chat_img1.jpg" mode="widthFix" /><text class="uni_badge uni_badge_dot"></text></view><view class="uinfo flex1">
								<view class="name ellipsis">çŒªçŒªä½©å¥‡</view><view class="subinfo ellipsis"><view class="uni-age"><text class="iconfont icon-nv"></text>24</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.15km</view></view><view class="subtxt ellipsis">æƒ³ç€ä½ çš„ç¬‘ï¼Œæƒ³ç€ä½ çš„é˜³å…‰å¹½é»˜å’Œå¸…æ°”å¤–å½¢ã€‚</view>
							</view><view class="time flex_selft">åœ¨çº¿</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome"><view class="avator"><image src="/static/uimg/u__chat_img12.jpg" mode="widthFix" /></view>
							<view class="uinfo flex1"><view class="name ellipsis">Alisa</view><view class="subinfo ellipsis"><view class="uni-age"><text class="iconfont icon-nv"></text>18</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.68km</view></view><view class="subtxt ellipsis">ç­¾åï¼šå¿ƒæƒ…ä¸é”™ï¼Œå†’ä¸ªæ³¡~</view>
							</view><view class="time flex_selft">25åˆ†é’Ÿå‰</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome">
							<view class="avator"><image src="/static/uimg/u__chat_img15.jpg" mode="widthFix" /><text class="uni_badge uni_badge_dot"></text></view>
							<view class="uinfo flex1"><view class="name ellipsis">ä¸€ç”Ÿæœ‰ä½ </view><view class="subinfo ellipsis"><view class="uni-age male"><text class="iconfont icon-nan"></text>23</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>1.76km</view></view>
					<view class="subtxt ellipsis">å°è®°ï¼šåˆšä¸Šçº¿ï¼Œé™„è¿‘æœ‰äººå—</view></view><view class="time flex_selft">åœ¨çº¿</view>
						</view>
						<view class="item uni__list uni__material" @tap="GoUhome"><view class="avator"><image src="/static/uimg/u__chat_img9.jpg" mode="widthFix" /></view>
							<view class="uinfo flex1"><view class="name ellipsis">å­¤ç‹¬ä¼ŠäººğŸ’‹</view><view class="subinfo ellipsis"><view class="uni-age"><text class="iconfont icon-nv"></text>26</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.32km</view></view>
					<view class="subtxt ellipsis">å°è®°ï¼šå¥¹ç°åœ¨å•èº«</view>
							</view><view class="time flex_selft">æ˜¨å¤© 15:28</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome">
							<view class="avator"><image src="/static/uimg/u__chat_img25.jpg" mode="widthFix" /></view><view class="uinfo flex1">
					<view class="name ellipsis">é€—ä½ ç©</view><view class="subinfo ellipsis"><view class="uni-age male"><text class="iconfont icon-nan"></text>28</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>1.26km</view></view><view class="subtxt ellipsis">ç­¾åï¼šæ¬¢è¿è”ç³»</view>
							</view><view class="time flex_selft">6åˆ†é’Ÿå‰</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome"><view class="avator"><image src="/static/uimg/u__chat_img5.jpg" mode="widthFix" /><text class="uni_badge uni_badge_dot"></text></view>
							<view class="uinfo flex1"><view class="name ellipsis">å¾€åä½™ç”Ÿéƒ½æ˜¯ä½ </view>
					<view class="subinfo ellipsis"><view class="uni-age"><text class="iconfont icon-nv"></text>21</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.93km</view></view><view class="subtxt ellipsis">ç­¾åï¼šå¤šä¸€ç‚¹çœŸè¯šï¼Œå°‘ä¸€ç‚¹å¥—è·¯</view>
							</view>
					<view class="time flex_selft">åœ¨çº¿</view></view>
					</view>
				</view>
				<view v-if="currentNavIndex == 2" class="uni__attentions">
					<view class="uni__listview"><view class="item uni__list uni__material" @tap="GoUhome" @longpress="handleAttentionMenu">
							<view class="avator"><image src="/static/uimg/u__chat_img35.jpg" mode="widthFix" /></view><view class="uinfo flex1">
								<view class="name ellipsis">å°è›®è…°</view><view class="subinfo ellipsis mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>21</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>éƒ‘å·</view></view>
							</view><view class="btn bg_linear1">å…³æ³¨</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome" @longpress="handleAttentionMenu"><view class="avator"><image src="/static/uimg/u__chat_img3.jpg" mode="widthFix" /></view>
							<view class="uinfo flex1"><view class="name ellipsis">ç´ é¢œè‡ªç„¶ç¾</view><view class="subinfo ellipsis mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>18</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>æ·±åœ³</view></view>
							</view><view class="btn cancel">å–æ¶ˆå…³æ³¨</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome" @longpress="handleAttentionMenu"><view class="avator"><image src="/static/uimg/u__chat_img29.jpg" mode="widthFix" /></view>
							<view class="uinfo flex1"><view class="name ellipsis">å¦‚æ­¤çš„ä¾èµ–</view><view class="subinfo ellipsis mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>27</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>0.29km</view></view>
							</view><view class="btn cancel">å–æ¶ˆå…³æ³¨</view>
						</view><view class="item uni__list uni__material" @tap="GoUhome" @longpress="handleAttentionMenu"><view class="avator"><image src="/static/uimg/u__chat_img22.jpg" mode="widthFix" /></view><view class="uinfo flex1"><view class="name ellipsis">ç¾å©·</view><view class="subinfo ellipsis mt_5"><view class="uni-age"><text class="iconfont icon-nv"></text>23</view><view class="uni-distance ml_10"><text class="iconfont icon-dingwei"></text>å¤§ç†</view></view>
							</view><view class="btn cancel">å–æ¶ˆå…³æ³¨</view></view>
					</view>
				</view>
			</block>
			<block v-else-if="currentTabIndex == 1">
				<uvideo />
			</block>
			
			<block v-else-if="currentTabIndex == 2">
				<view class="uni__listview bg_fff" style="padding: 10upx 30upx 20upx;"><view class="uni__list" style="background: #ebebeb;border-radius: 50upx;"><text class="iconfont icon-sousuo c_999 mr_15"></text><input class="searIpt flex1 fs_14" type="text" placeholder="æœç´¢" />
					</view>
				</view>
				<view class="uni__recordChat-list"><view class="uni__listview">
				<view class="item uni__list uni__material" @tap="GoPrivateChat" @longpress="uniMsgMenu"><view class="avator"><image src="/static/uimg/u__chat_img1.jpg" mode="widthFix" /></view>
					<view class="msginfo flex1"><view class="title ellipsis">çŒªçŒªä½©å¥‡</view><view class="subtitle ellipsis">[å®ˆæŠ¤ä¹‹å¿ƒ]</view></view><view class="time flex_selft">11:42</view><text class="uni_badge">15</text>
				</view>
				<view class="item uni__list uni__material" @tap="GoPrivateChat" @longpress="uniMsgMenu"><view class="avator"><image src="/static/logo.png" mode="widthFix" /></view>
					<view class="msginfo flex1"><view class="title ellipsis">UniAppäº’åŠ¨ç¾¤</view><view class="subtitle ellipsis">æ¬¢è¿æ¥åˆ°Uniç›´æ’­äº’åŠ¨äº¤æµç¾¤ï¼Œåˆ†äº«äº¤æµæœ€æ–°çš„é€—æ¯”è¶£äº‹ã€‚</view>
				</view><view class="time flex_selft">09:36</view><text class="uni_badge uni_badge_dot"></text>
						</view>
				<view class="item uni__list uni__material" @tap="GoPrivateChat" @longpress="uniMsgMenu">
					<view class="avator"><image src="/static/uimg/u__chat_img14.jpg" mode="widthFix" /></view>
					<view class="msginfo flex1"><view class="title ellipsis">Aladon</view><view class="subtitle ellipsis">ç”Ÿæ´»çš„çç²¹è®©æˆ‘ä»¬ç—›å¹¶å¿«ä¹ç€</view>
					</view><view class="time flex_selft">5å¤©å‰</view>
						</view>
						<view class="item uni__list uni__material" @tap="GoPrivateChat" @longpress="uniMsgMenu">
					<view class="avator"><image src="/static/uimg/u__chat_img5.jpg" mode="widthFix" /></view><view class="msginfo flex1">
					<view class="title ellipsis">å¾€åä½™ç”Ÿéƒ½æ˜¯ä½ </view><view class="subtitle ellipsis">Hi æ™šä¸Šä¸€èµ·æ¥Happyé¸­~</view>
					</view><view class="time flex_selft">10æœˆ19æ—¥</view></view>
					</view>
				</view>
			</block>
			
			<!-- ç›´æ’­ -->
		<!-- 	<block v-else-if="currentTabIndex == 3">
				<ulive />
			</block> -->
			
			<!-- æˆ‘çš„ -->
			<block v-else>
				<ucenter />
			</block>
		</view>
		
		<tab-bar :current="currentTabIndex" backgroundColor="#fff" color="#999" tintColor="#2cc6e0" @click="handleTabbar"></tab-bar>
		<uni-pop ref="uniPop"></uni-pop>
		<popup-window ref="popupWindow" />
	</view>
</template>

<script>
	import { mapState, mapMutations } from 'vuex'
	import ucenter from '@/pages/ucenter'
	import uvideo from '@/pages/uVideo'
	import ulive from '@/pages/uLive'
	export default {
		data() {
			return {currentNavIndex: 0,currentTabIndex: 0
			}
		},
		components: {ucenter, uvideo, ulive
		},
		computed: {...mapState(['user', 'token'])
		},
		mounted(){if(!this.user){uni.redirectTo({url: '/pages/auth/login'})
			}
		},
		methods: {
		handleDropMenu() {this.$refs.popupWindow.show()
			},
		handleTopNav(index) {this.currentNavIndex = index
			},
			handleTabbar(index) {this.currentTabIndex = index
			},
			
			GoUhome() {uni.navigateTo({url: '/pages/ucenter/uhome'})
			},
			handlePublish() {uni.navigateTo({url: '/pages/uZone/publish'})
			},GoContact() {uni.navigateTo({url: '/pages/contact/index'})
			},GoPrivateChat() {uni.navigateTo({url: '/pages/chat/privateChat/chat'})
			},
			
			// é•¿æŒ‰åŠ¨æ€
			handleDynamicMenu() {
			let uniPop = this.$refs.uniPop
			uniPop.show({skin: 'androidSheet',
			btns: [{text: 'ä¸æ„Ÿå…´è¶£'},{text: 'å¤åˆ¶'},
				{text: 'ä¸¾æŠ¥',onTap() {uniPop.close()
					}
						}
					]
				})
			},
			handleAttentionMenu() {
			let uniPop = this.$refs.uniPop
			uniPop.show({skin: 'androidSheet',btns: [{text: 'æ‹‰é»‘TA'},
				{text: 'åˆ é™¤',
				onTap() {
					uniPop.close()
					}
						}
					]
				})
			},
			uniMsgMenu() {
				let uniPop = this.$refs.uniPop
				uniPop.show({skin: 'androidSheet',
				btns: [{text: 'åˆ é™¤å¯¹è¯',onTap() {
					uniPop.close()
					}
				}]})
			}
		}
	}
</script>

<style>
</style>
